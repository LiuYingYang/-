{"version":3,"sources":["uni-app:///src/main.ts?{\"page\":\"modules%2Fpages%2Fsubmit%2Fsubmit\"}","webpack:///./src/modules/pages/submit/submit.vue?09bf","webpack:///./src/modules/pages/submit/submit.vue?689d","webpack:///./src/modules/pages/submit/submit.vue?a694","webpack:///./src/modules/pages/submit/submit.vue?3012","uni-app:///src/modules/pages/submit/submit.vue?vue&type=script&lang=ts&","webpack:///./src/modules/pages/submit/submit.vue?5297","webpack:///./src/modules/pages/submit/submit.vue?575d","webpack:///./src/modules/pages/submit/helper.wxs?59f1",null],"names":[],"mappings":"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","file":"modules/pages/submit/submit.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './modules/pages/submit/submit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./submit.vue?vue&type=template&id=7db39384&scoped=true&filter-modules=eyJoZWxwZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6Mzg3MSwiYXR0cnMiOnsibW9kdWxlIjoiaGVscGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4vaGVscGVyLnd4cyJ9LCJlbmQiOjM4NzF9fQ%3D%3D&\"\nvar renderjs\nimport script from \"./submit.vue?vue&type=script&lang=ts&\"\nexport * from \"./submit.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./submit.vue?vue&type=style&index=0&id=7db39384&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7db39384\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"./helper.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5C%E4%BB%A3%E7%A0%81%5Cgroup-shop-uniapp-wx-Source%5Csrc%5Cmodules%5Cpages%5Csubmit%5Csubmit.vue&module=helper&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"modules/pages/submit/submit.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit.vue?vue&type=template&id=7db39384&scoped=true&filter-modules=eyJoZWxwZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6Mzg3MSwiYXR0cnMiOnsibW9kdWxlIjoiaGVscGVyIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4vaGVscGVyLnd4cyJ9LCJlbmQiOjM4NzF9fQ%3D%3D&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit.vue?vue&type=script&lang=ts&\"","\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport Toast from '@/wxcomponents/vant-weapp/toast/toast'\r\nimport formid from '@/components/formId/formId.vue'\r\nimport customForm from './custom-form/custom-form.vue'\r\nimport { SubmitStateType, SubmitOrderType, OfferOptionsType } from './interface'\r\nimport {\r\n\tgetConfirmOrder,\r\n\tcreateOrder,\r\n\tpayment,\r\n\tgetOrderStatus,\r\n\tgetFreightAmount\r\n} from '@/api'\r\nimport sum from 'lodash/sum'\r\nimport { IAdress, IProcuct, PayType } from './interface'\r\n\r\n@Component({\r\n\tcomponents: {\r\n\t\tformid,\r\n\t\tcustomForm\r\n\t}\r\n})\r\nexport default class Submit extends Vue implements SubmitStateType {\r\n\tpayTypes: Array<PayType> = [\r\n\t\t{\r\n\t\t\tname: '微信支付',\r\n\t\t\tvalue: 'WECHAT',\r\n\t\t\ticon: 'iconweixin'\r\n\t\t}\r\n\t]\r\n\tdeliveryActions = [\r\n\t\t{\r\n\t\t\tname: '物流配送',\r\n\t\t\tvalue: 'LOGISTICS'\r\n\t\t}\r\n\t]\r\n\tforms = []\r\n\tform: SubmitOrderType = {\r\n\t\tcustomForm: '',\r\n\t\tdeliverType: 'LOGISTICS',\r\n\t\tformId: '',\r\n\t\tgroupLeaderId: '',\r\n\t\titemDtoList: [],\r\n\t\tminiAccountAddressId: '',\r\n\t\tuserNote: '',\r\n\t\torderType: 'MALL',\r\n\t\tpayType: 'WECHAT',\r\n\t\tsourceType: 'MINI_PROGRAM'\r\n\t}\r\n\tofferOptions: OfferOptionsType = {\r\n\t\tfreightAmount: 0\r\n\t}\r\n\titemVoList: Array<IProcuct> = []\r\n\tminiAccountAddress: Array<IAdress> = []\r\n\taddressIndex = 0\r\n\trealPrice = 0\r\n\ttotalPrice = 0\r\n\tdiscountInfoDto = {\r\n\t\tceiling: 0\r\n\t}\r\n\tisFirst = true\r\n\taddress: IAdress = {} as IAdress\r\n\thaSubscribed = false\r\n\thasSubmited = false\r\n\tprevRoute = ''\r\n\tuseRebate = true\r\n\tsupplyBonus = 0\r\n\tdataFrom = 'miniApp'\r\n\ttimer: number = 0\r\n\toptions = {\r\n\t\titems: ''\r\n\t}\r\n\r\n\tonLoad(options: { items: string }) {\r\n\t\tthis.options = options\r\n\t\tthis.getOrderData(options)\r\n\r\n\t\tthis.$Pubsub.on('app-launch', () => {\r\n\t\t\tthis.getOrderData(options)\r\n\t\t})\r\n\t}\r\n\r\n\tonShow() {\r\n\t\tif (!this.isFirst) {\r\n\t\t\tthis.getOrderData(this.options)\r\n\t\t}\r\n\t}\r\n\r\n\tonHide() {\r\n\t\tthis.setData({\r\n\t\t\tisFirst: false\r\n\t\t})\r\n\t}\r\n\r\n\tonUnload() {\r\n\t\tclearInterval(this.timer)\r\n\t\tToast.clear()\r\n\t}\r\n\r\n\tonShareAppMessage() {\r\n\t\tconst shopName = this.$STORE.shopSetStore.shopInfo.shopName\r\n\t\treturn {\r\n\t\t\ttitle: shopName,\r\n\t\t\tpath: '/pages/index/index?page=home',\r\n\t\t\timageUrl: ''\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 设置route\r\n\t */\r\n\r\n\tgetPrevRoute(): string {\r\n\t\ttry {\r\n\t\t\tconst pages = getCurrentPages()\r\n\t\t\treturn pages[pages.length - 2].route\r\n\t\t} catch {\r\n\t\t\treturn ''\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 获取配送类型\r\n\t * @returns Promise\r\n\t */\r\n\r\n\tgetShipperSetting(): Promise<unknown> {\r\n\t\tconst _form = this.form\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\t_form.deliverType = 'LOGISTICS'\r\n\t\t\tthis.setData({\r\n\t\t\t\tdeliveryActions: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '物流配送',\r\n\t\t\t\t\t\tvalue: 'LOGISTICS'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tform: _form\r\n\t\t\t})\r\n\t\t\treturn resolve('1')\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 获取实际价格\r\n\t * @returns {number} 实际价格\r\n\t */\r\n\r\n\tgetRealPrice(): number {\r\n\t\treturn this.totalPrice\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 设置实际价格\r\n\t */\r\n\r\n\tsetRealPrice(): void {\r\n\t\tconst { freightAmount } = this.offerOptions\r\n\t\tconst realPrice = this.getRealPrice()\r\n\t\tthis.setData({\r\n\t\t\trealPrice:\r\n\t\t\t\trealPrice <= 0\r\n\t\t\t\t\t? freightAmount > 0\r\n\t\t\t\t\t\t? freightAmount\r\n\t\t\t\t\t\t: 0.01\r\n\t\t\t\t\t: (realPrice * 100000000 + freightAmount * 100000000) / 100000000\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 设置总价格\r\n\t */\r\n\r\n\tsetTotalPrice(): void {\r\n\t\tconst totalPrice = sum(\r\n\t\t\tthis.itemVoList.map((item) => {\r\n\t\t\t\treturn item.productPrice * 1000000 * item.productQuantity\r\n\t\t\t})\r\n\t\t)\r\n\r\n\t\tthis.setData(\r\n\t\t\t{\r\n\t\t\t\ttotalPrice: (totalPrice / 1000000).toFixed(2)\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tthis.setRealPrice()\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 轮训订单状态\r\n\t * @param {string} orderId 订单号\r\n\t * @param {() => Promise<void>} cb 下一步执行函数\r\n\t */\r\n\r\n\tgetOrderStatus(orderId: string, cb: () => Promise<void>): void {\r\n\t\tthis.timer = setInterval(() => {\r\n\t\t\tgetOrderStatus({\r\n\t\t\t\torderId,\r\n\t\t\t\titems: JSON.parse(\r\n\t\t\t\t\tdecodeURIComponent(\r\n\t\t\t\t\t\tthis.options.items || this.getOrSetItemStorage(true, '')\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\t// -1->秒杀失败;0->排队中;order->成功;\r\n\t\t\t\t\tif (res === -1) {\r\n\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\treturn this.$Popup.toast('下单失败，请重试')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res === 0) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t\tcb()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\tthis.$Popup\r\n\t\t\t\t\t\t.alert({\r\n\t\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\t\tcontent: err || '订单状态获取失败'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => null)\r\n\t\t\t\t})\r\n\t\t}, 1500)\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 获取配送费\r\n\t * @param {{ addressId: string }} query\r\n\t */\r\n\r\n\tgetFreightAmount(query: { addressId: string | number }): void {\r\n\t\t// 配送类型：1->物流模式（需要总金额、收货地址ID）\r\n\t\tconst type = 1\r\n\t\t// 物流\r\n\t\tconst addressData = this.miniAccountAddress[this.addressIndex]\r\n\r\n\t\t// 如果没有地址数据 不发起请求\r\n\t\tif (!addressData) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 如果为物流模式 需要将addressId改为postCode\r\n\t\tconst addressId = addressData.postCode\r\n\r\n\t\tObject.assign(query, {\r\n\t\t\tamount: this.totalPrice,\r\n\t\t\taddressId,\r\n\t\t\tregion: addressId,\r\n\t\t\titems: this.form.itemDtoList\r\n\t\t})\r\n\r\n\t\tgetFreightAmount({\r\n\t\t\ttype,\r\n\t\t\tamount: this.totalPrice,\r\n\t\t\t...query\r\n\t\t})\r\n\t\t\t.then(({ cost }) => {\r\n\t\t\t\tif (cost === null || cost === -1) {\r\n\t\t\t\t\treturn this.$Popup.toast('不在配送范围内')\r\n\t\t\t\t}\r\n\t\t\t\tthis.setData(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t['offerOptions.freightAmount']: cost\r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tthis.setRealPrice()\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthis.$Popup.toast(err || '运费获取失败')\r\n\t\t\t})\r\n\t}\r\n\r\n\t/** 获取提交信息 */\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description:\r\n\t * @param {*} options\r\n\t */\r\n\r\n\tgetOrderData({ items = this.getOrSetItemStorage(true, '') }): void {\r\n\t\tToast.loading({\r\n\t\t\tduration: 15000\r\n\t\t})\r\n\t\tgetConfirmOrder({\r\n\t\t\titems: JSON.parse(decodeURIComponent(items)),\r\n\t\t\ttype: 'MALL'\r\n\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\t// 设置一系列数据\r\n\t\t\t\tthis.setResToData(res, items)\r\n\t\t\t\tToast.clear()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthis.$Popup.toast(err || '结算页面信息获取失败')\r\n\t\t\t})\r\n\t}\r\n\r\n\t/** 将数据设置到data */\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description:\r\n\t * @param {*} res\r\n\t * @param {string} items\r\n\t */\r\n\r\n\tsetResToData(\r\n\t\tres: {\r\n\t\t\tminiAccountAddress: Array<IAdress>\r\n\t\t\titemVoList: Array<IProcuct>\r\n\t\t\tdiscountInfoDto: {\r\n\t\t\t\tceiling: number\r\n\t\t\t}\r\n\t\t\tsupplyBonus: number\r\n\t\t},\r\n\t\titems: string\r\n\t): void {\r\n\t\tconst { miniAccountAddress, itemVoList, discountInfoDto, supplyBonus } = res\r\n\t\tlet integralValue = 1\r\n\r\n\t\tthis.getOrSetItemStorage(false, items)\r\n\r\n\t\tthis.setData(\r\n\t\t\t{\r\n\t\t\t\tminiAccountAddress,\r\n\t\t\t\titemVoList,\r\n\t\t\t\tdiscountInfoDto,\r\n\t\t\t\tintegralValue,\r\n\t\t\t\tsupplyBonus,\r\n\t\t\t\t['form.itemDtoList']: JSON.parse(decodeURIComponent(items))\r\n\t\t\t},\r\n\t\t\tasync () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tforms: this.getCustomFrom(),\r\n\t\t\t\t\t\tprevRoute: this.getPrevRoute()\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tawait this.getShipperSetting()\r\n\r\n\t\t\t\t\tthis.setAddressIndexAndId()\r\n\r\n\t\t\t\t\tthis.setTotalPrice()\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tthis.$Popup.toast(err)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 获取自定义表单\r\n\t * @returns {string} customFrom 自定义表单数据\r\n\t */\r\n\r\n\tgetCustomFrom(): string {\r\n\t\treturn JSON.parse(this.$STORE.setStore.order.customFrom)\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 设置items缓存做跳转回来使用\r\n\t * @param {boolean} isGet\r\n\t * @param {?string} items\r\n\t * @returns {string} items\r\n\t */\r\n\r\n\tgetOrSetItemStorage(isGet = false, items: string): string {\r\n\t\tif (isGet) {\r\n\t\t\treturn uni.getStorageSync('order-items') || items\r\n\t\t}\r\n\r\n\t\tuni.setStorageSync('order-items', items || this.options.items)\r\n\t\treturn ''\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 获取或者设置数据缓存\r\n\t * @param {boolean} isGet\r\n\t */\r\n\r\n\tgetOrsetStorage(isGet = false): void {\r\n\t\tconst keys = ['form', 'itemVoList', 'miniAccountAddress', 'addressIndex']\r\n\t\tconst data: { [x: string]: any } = {}\r\n\t\tconst storageData = JSON.parse(uni.getStorageSync('submitData') || '{}')\r\n\t\tconst setData = (store: { [x: string]: any }) => {\r\n\t\t\tkeys.forEach((key) => {\r\n\t\t\t\tdata[key] = store[key]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (isGet) {\r\n\t\t\tif (storageData) {\r\n\t\t\t\tuni.getStorageSync('submitData')\r\n\t\t\t\tsetData(storageData)\r\n\t\t\t\tuni.setStorageSync('submitData', JSON.stringify(data))\r\n\t\t\t\treturn\r\n\t\t\t} else {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 验证表单\r\n\t * @returns {boolean}\r\n\t */\r\n\tverificationForm(): boolean {\r\n\t\tconst formComponent = this.$refs.customForm as customForm\r\n\t\treturn formComponent.verificationForm()\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 验证表单\r\n\t * @returns {boolean}\r\n\t */\r\n\r\n\thandleVerification(): boolean {\r\n\t\tconst formComponent = this.$refs.customForm as customForm\r\n\t\t// 自定义表单验证\r\n\t\tif (!formComponent || !formComponent.verificationForm()) {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tconst addressData = this.miniAccountAddress[this.addressIndex]\r\n\t\tif (!addressData || !addressData.id) {\r\n\t\t\tthis.$Popup\r\n\t\t\t\t.alert({\r\n\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\tcontent: '请添加地址'\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.goSelectAddress()\r\n\t\t\t\t})\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\treturn true\r\n\t}\r\n\t/**\r\n\t * 提交订单\r\n\t * BALANCE WECHAT FRIEND\r\n\t */\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 提交订单\r\n\t * @param {string} formId\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\r\n\tasync handleSubmit(formdata: { formId: string }): Promise<void> {\r\n\t\ttry {\r\n\t\t\tif (!this.handleVerification() || this.hasSubmited) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.setData({\r\n\t\t\t\thasSubmited: true\r\n\t\t\t})\r\n\t\t\tconst formComponent = this.$refs.customForm as customForm\r\n\r\n\t\t\tif (!this.haSubscribed) {\r\n\t\t\t\t/** 模板订阅 */\r\n\t\t\t\tawait this.$STORE.messageStore.subscribe([\r\n\t\t\t\t\tthis.$STORE.messageStore.type.sendMsg,\r\n\t\t\t\t\tthis.$STORE.messageStore.type.memberCartOpen\r\n\t\t\t\t])\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\thaSubscribed: true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tToast.loading({\r\n\t\t\t\tduration: 300000\r\n\t\t\t})\r\n\r\n\t\t\t/** 如果是从H5进入小程序支付订单 删除activityId 添加solitaireActivityId */\r\n\t\t\tif (this.dataFrom === 'h5') {\r\n\t\t\t\tthis.form.itemDtoList.forEach((inItem: any) => {\r\n\t\t\t\t\tinItem.solitaireActivityId = inItem.activityId\r\n\t\t\t\t\tdelete inItem.activityId\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tconst { id } = this.miniAccountAddress[this.addressIndex]\r\n\t\t\t// 创建订单\r\n\t\t\tconst orderId = (await createOrder(\r\n\t\t\t\tObject.assign(this.form, {\r\n\t\t\t\t\tformId: formdata.formId,\r\n\t\t\t\t\tgroupLeaderId: this.form.groupLeaderId || '',\r\n\t\t\t\t\tgroupLeaderNickname: '',\r\n\t\t\t\t\tpointAuthor: '',\r\n\t\t\t\t\tpoint_phone: '',\r\n\t\t\t\t\tminiAccountAddressId: id,\r\n\t\t\t\t\tcustomForm: formComponent\r\n\t\t\t\t\t\t? JSON.stringify(formComponent.localForms)\r\n\t\t\t\t\t\t: '',\r\n\t\t\t\t\tdeliveryTemplateId:\r\n\t\t\t\t\t\t(await this.$STORE.messageStore.getTemplateId(\r\n\t\t\t\t\t\t\tthis.$STORE.messageStore.type.sendMsg\r\n\t\t\t\t\t\t)) || null,\r\n\t\t\t\t\tmemberTemplateId:\r\n\t\t\t\t\t\t(await this.$STORE.messageStore.getTemplateId(\r\n\t\t\t\t\t\t\tthis.$STORE.messageStore.type.memberCartOpen\r\n\t\t\t\t\t\t)) || null,\r\n\t\t\t\t\tsolitaireActivityId: this.form.itemDtoList[0].solitaireActivityId\r\n\t\t\t\t\t\t? this.form.itemDtoList[0].solitaireActivityId\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t})\r\n\t\t\t)) as string\r\n\r\n\t\t\t// 轮训订单状态\r\n\t\t\tthis.getOrderStatus(orderId, async () => {\r\n\t\t\t\tthis.handleSubmitType(orderId).catch((err: string) => {\r\n\t\t\t\t\tthis.$Popup.toast(err || '支付失败')\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\thasSubmited: false\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\tToast.clear()\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tthis.setData({\r\n\t\t\t\thasSubmited: false\r\n\t\t\t})\r\n\t\t\tToast.clear()\r\n\t\t\tthis.$Popup.alert({\r\n\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\tcontent: err || '订单状态获取失败'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t/** 处理付款类型 */\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 处理付款类型\r\n\t * @param {string} orderId\r\n\t * @returns {*}\r\n\t */\r\n\r\n\thandleSubmitType(orderId: string): Promise<string> {\r\n\t\tswitch (this.form.payType) {\r\n\t\t\tcase 'WECHAT':\r\n\t\t\t\treturn this.payment(orderId)\r\n\t\t\tdefault:\r\n\t\t\t\treturn Promise.resolve('')\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 支付\r\n\t * @param {string} orderId\r\n\t */\r\n\r\n\tpayment(orderId: string): Promise<string> {\r\n\t\treturn new Promise((reject) => {\r\n\t\t\tpayment(orderId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.wecharPay(res.wxResult, orderId)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\treject(err || '支付失败')\r\n\t\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 下单成功操作\r\n\t * @param {string} orderId\r\n\t * @param {()=>void} cb\r\n\t * @param {boole} succ\r\n\t */\r\n\r\n\torderSuccess(orderId: string, cb?: () => void, succ: boolean = true): void {\r\n\t\tsucc && this.$Popup.toast('支付成功')\r\n\t\tif (cb) return cb()\r\n\t\tconst arr = JSON.parse(\r\n\t\t\tdecodeURIComponent(\r\n\t\t\t\tthis.options.items || this.getOrSetItemStorage(true, '')\r\n\t\t\t)\r\n\t\t)\r\n\t\treturn uni.redirectTo({\r\n\t\t\turl: `/subcontract/pages/orderSuccess/orderSuccess?price=${this.realPrice}&orderId=${orderId}`\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 微信支付\r\n\t * @param {[x:string]:string|undefined} res\r\n\t * @param {string} orderId\r\n\t */\r\n\r\n\twecharPay(res: { [x: string]: string | undefined }, orderId: string): void {\r\n\t\tconst isCancel = (msg: string | string[]) => msg.includes('cancel')\r\n\t\tuni.requestPayment({\r\n\t\t\ttimeStamp: res.timeStamp,\r\n\t\t\tnonceStr: res.nonceStr,\r\n\t\t\tpackage: res.packageValue,\r\n\t\t\tsignType: res.signType,\r\n\t\t\tpaySign: res.paySign,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tthis.orderSuccess(orderId)\r\n\t\t\t},\r\n\t\t\tfail: (e) => {\r\n\t\t\t\tclearInterval(this.timer)\r\n\r\n\t\t\t\t// 如果为取消 跳至订单详情\r\n\t\t\t\tif (isCancel(e.errMsg)) {\r\n\t\t\t\t\tToast.clear()\r\n\t\t\t\t\treturn uni.redirectTo({\r\n\t\t\t\t\t\turl: `/subcontract/pages/order/order?type=0`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.$Popup.toast('支付失败')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 前往选择地址\r\n\t */\r\n\r\n\tgoSelectAddress(): void {\r\n\t\tthis.getOrsetStorage()\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/subcontract/pages/address/address?redirect=${encodeURIComponent(\r\n\t\t\t\t`/modules/pages/submit/submit`\r\n\t\t\t)}`\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 设置地址索引\r\n\t */\r\n\r\n\tsetAddressIndexAndId(): void {\r\n\t\tconst defaultAddressIndex = this.miniAccountAddress.findIndex((item) => {\r\n\t\t\treturn item.isDefault === 1\r\n\t\t})\r\n\t\tconst addressIndex = this.miniAccountAddress.findIndex((item) => {\r\n\t\t\treturn item.id === this.address.id\r\n\t\t})\r\n\t\tconst index = addressIndex >= 0 ? addressIndex : defaultAddressIndex\r\n\t\tconst addressData = this.miniAccountAddress[index]\r\n\t\tconst id = addressData\r\n\t\t\t? this.form.deliverType === 'LOGISTICS'\r\n\t\t\t\t? addressData.id\r\n\t\t\t\t: addressData.postCode\r\n\t\t\t: ''\r\n\r\n\t\tthis.setData(\r\n\t\t\t{\r\n\t\t\t\taddressIndex: index,\r\n\t\t\t\t[`form.miniAccountAddressId`]: id\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\t// 获取运费\r\n\t\t\t\tthis.getFreightAmount({\r\n\t\t\t\t\taddressId: id ? id : ''\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 支付方式选择\r\n\t * @param {string} name\r\n\t * @param {boolean} disabled\r\n\t */\r\n\r\n\tonPayTypeClick({\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: { name, disabled }\r\n\t\t}\r\n\t}: {\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: { name: string; disabled: boolean }\r\n\t\t}\r\n\t}): void {\r\n\t\tif (disabled) return\r\n\t\tlet _form = this.form\r\n\t\t_form.payType = name\r\n\t\tthis.form = _form\r\n\t}\r\n}\r\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit.vue?vue&type=style&index=0&id=7db39384&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit.vue?vue&type=style&index=0&id=7db39384&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1630483248099\n      var cssReload = require(\"E:/代码/group-shop-uniapp-wx-Source/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./helper.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5C%E4%BB%A3%E7%A0%81%5Cgroup-shop-uniapp-wx-Source%5Csrc%5Cmodules%5Cpages%5Csubmit%5Csubmit.vue&module=helper&lang=wxs\"; export default mod; export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./helper.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5C%E4%BB%A3%E7%A0%81%5Cgroup-shop-uniapp-wx-Source%5Csrc%5Cmodules%5Cpages%5Csubmit%5Csubmit.vue&module=helper&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}