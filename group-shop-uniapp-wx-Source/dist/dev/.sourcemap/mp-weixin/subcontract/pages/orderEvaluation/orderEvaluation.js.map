{"version":3,"sources":["uni-app:///src/main.ts?{\"page\":\"subcontract%2Fpages%2ForderEvaluation%2ForderEvaluation\"}",null,"webpack:///./src/subcontract/pages/orderEvaluation/orderEvaluation.vue?6585","webpack:///./src/subcontract/pages/orderEvaluation/orderEvaluation.vue?5da4","webpack:///./src/subcontract/pages/orderEvaluation/orderEvaluation.vue?e18c","uni-app:///src/subcontract/pages/orderEvaluation/orderEvaluation.vue?vue&type=script&lang=ts&","webpack:///./src/subcontract/pages/orderEvaluation/orderEvaluation.vue?e1c2","webpack:///./src/subcontract/pages/orderEvaluation/orderEvaluation.vue?1390"],"names":[],"mappings":"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","file":"subcontract/pages/orderEvaluation/orderEvaluation.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './subcontract/pages/orderEvaluation/orderEvaluation.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./orderEvaluation.vue?vue&type=template&id=3aac34df&scoped=true&\"\nvar renderjs\nimport script from \"./orderEvaluation.vue?vue&type=script&lang=ts&\"\nexport * from \"./orderEvaluation.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./orderEvaluation.vue?vue&type=style&index=0&id=3aac34df&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3aac34df\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subcontract/pages/orderEvaluation/orderEvaluation.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderEvaluation.vue?vue&type=template&id=3aac34df&scoped=true&\"","var components\ntry {\n  components = {\n    goods: function() {\n      return import(\n        /* webpackChunkName: \"components/goods/goods\" */ \"@/components/goods/goods.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderEvaluation.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderEvaluation.vue?vue&type=script&lang=ts&\"","\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { evaluate, getOrderDetail } from '@/api/modules/order'\r\nimport { uploadFile } from '@/utils/upload'\r\nimport { isArray } from 'lodash'\r\nimport { IGoodsList } from '@/typings/goods'\r\nimport { IAfterOrderDetail } from '../afterSaleDetail/afterSaleDetailType'\r\n\r\n@Component({})\r\nexport default class OrderEvaluation extends Vue {\r\n\tmessage: string = ''\r\n\tdetail: IAfterOrderDetail = {} as IAfterOrderDetail\r\n\t// 评价表单\r\n\tform = {\r\n\t\torderId: '',\r\n\t\tproductEvaluateDtoList: [] as Array<{\r\n\t\t\tcomment: string\r\n\t\t\tpicture: string\r\n\t\t\t// 本地维护的图片数组\r\n\t\t\tpictures: string[]\r\n\t\t\t// 原始图片\r\n\t\t\toriginPhotos: string[]\r\n\t\t\tproductSkuId: string\r\n\t\t\trate: number\r\n\t\t}>,\r\n\t\tshopRate: 0\r\n\t}\r\n\t// 是否已提交\r\n\tsubmitted: boolean = false\r\n\r\n\tget appMode() {\r\n\t\treturn this.$STORE.setStore.shopSetting.appMode\r\n\t}\r\n\r\n\tonLoad({ id = '1324995623470723073' }) {\r\n\t\tthis.getOrderDetail(id)\r\n\t\tthis.$Pubsub.on('app-launch', () => {\r\n\t\t\tthis.getOrderDetail(id)\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 获取订单详情\r\n\t * @param {string} id\r\n\t */\r\n\tgetOrderDetail(id: string) {\r\n\t\tgetOrderDetail(id)\r\n\t\t\t.then((detail: IAfterOrderDetail) => {\r\n\t\t\t\tconst orderItemList: IGoodsList[] = detail.orderItemList.filter(\r\n\t\t\t\t\t(item: IGoodsList) => {\r\n\t\t\t\t\t\treturn !item.afs || item.afs.status === 'CLOSE'\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tdetail: { ...detail, orderItemList },\r\n\t\t\t\t\t'form.productEvaluateDtoList': this.setProductEvaluateDtoList(\r\n\t\t\t\t\t\torderItemList\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthis.$Popup.toast(err || '详情获取失败')\r\n\t\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 设置评分队列\r\n\t * @param {IGoodsList[]} list\r\n\t * @returns {*}\r\n\t */\r\n\r\n\tsetProductEvaluateDtoList(\r\n\t\tlist: IGoodsList[]\r\n\t): {\r\n\t\tcomment: string\r\n\t\tpicture: string\r\n\t\tpictures: string[]\r\n\t\tproductSkuId: string\r\n\t\trate: number\r\n\t}[] {\r\n\t\treturn list.map((item: IGoodsList) => {\r\n\t\t\treturn {\r\n\t\t\t\tcomment: '',\r\n\t\t\t\tpicture: '',\r\n\t\t\t\t// 本地维护的图片数组\r\n\t\t\t\tpictures: [],\r\n\t\t\t\tproductSkuId: item.productSkuId,\r\n\t\t\t\trate: 0\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 监听表单输入并设置对应值\r\n\t * @param {*} e\r\n\t */\r\n\r\n\tonFieldChange({\r\n\t\tdetail,\r\n\t\ttarget: {\r\n\t\t\tdataset: { key, index }\r\n\t\t}\r\n\t}: {\r\n\t\tdetail: number | string\r\n\t\ttarget: {\r\n\t\t\tdataset: {\r\n\t\t\t\tkey: string\r\n\t\t\t\tindex: number\r\n\t\t\t}\r\n\t\t}\r\n\t}) {\r\n\t\tif (key === 'comment') {\r\n\t\t\tthis.form.productEvaluateDtoList[index].comment = String(detail)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.form.productEvaluateDtoList[index].rate = Number(detail)\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 删除图片\r\n\t * @param {*} e\r\n\t */\r\n\r\n\thandleDelPhoto({\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: { index, key, imageIndex }\r\n\t\t}\r\n\t}: {\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: {\r\n\t\t\t\tindex: number\r\n\t\t\t\tkey: string\r\n\t\t\t\timageIndex: number\r\n\t\t\t}\r\n\t\t}\r\n\t}) {\r\n\t\tconst pictures = this.form.productEvaluateDtoList[index].pictures\r\n\t\tpictures.splice(imageIndex, 1)\r\n\t\tthis.setData({\r\n\t\t\t[`form.productEvaluateDtoList[${index}].${key}`]: pictures\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 查看图片大图\r\n\t * @param {*} e\r\n\t */\r\n\thandleSeePhoto({\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: { item, img }\r\n\t\t}\r\n\t}: {\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: {\r\n\t\t\t\titem: string[]\r\n\t\t\t\timg: string\r\n\t\t\t}\r\n\t\t}\r\n\t}) {\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: img,\r\n\t\t\turls: item\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 选取照片\r\n\t * @param {*} e\r\n\t */\r\n\r\n\thandleTakePhoto({\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: { index }\r\n\t\t}\r\n\t}: {\r\n\t\tcurrentTarget: {\r\n\t\t\tdataset: {\r\n\t\t\t\tindex: number\r\n\t\t\t}\r\n\t\t}\r\n\t}) {\r\n\t\tconst pictures = this.form.productEvaluateDtoList[index].pictures\r\n\t\tif (pictures.length >= 5) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '已达到上传上限',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t\tuni.chooseImage({\r\n\t\t\tcount: 5,\r\n\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\tsourceType: ['camera'],\r\n\t\t\tsuccess: async ({ tempFilePaths }) => {\r\n\t\t\t\tif (isArray(tempFilePaths)) {\r\n\t\t\t\t\ttempFilePaths.forEach((url) => {\r\n\t\t\t\t\t\tuploadFile(url)\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tthis.form.productEvaluateDtoList[index].pictures.push(res)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: err || '上传失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: err || '详情获取失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 将图片转为字符串\r\n\t */\r\n\r\n\ttranfromPics() {\r\n\t\tconst productEvaluateDtoList = this.form.productEvaluateDtoList.map(\r\n\t\t\t(item: { picture: any; pictures: any[] }) => {\r\n\t\t\t\titem.picture = item.pictures.join(',')\r\n\t\t\t\treturn item\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis.setData({\r\n\t\t\t'form.productEvaluateDtoList': productEvaluateDtoList\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 验证表单\r\n\t */\r\n\r\n\tverification() {\r\n\t\tconst { productEvaluateDtoList } = this.form\r\n\r\n\t\tconst evLen = productEvaluateDtoList.every((item: { rate: number }) => {\r\n\t\t\titem.rate >= 1\r\n\t\t})\r\n\r\n\t\tif (evLen) {\r\n\t\t\tthis.$Popup.toast('商品评分不可为空')\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\t/**\r\n\t * @LastEditors: chuyinlong\r\n\t * @description: 提交评价\r\n\t */\r\n\r\n\tsubmit() {\r\n\t\tif (!this.verification() || this.submitted) return\r\n\r\n\t\tthis.setData({\r\n\t\t\tsubmitted: true\r\n\t\t})\r\n\t\tthis.tranfromPics()\r\n\r\n\t\tevaluate(\r\n\t\t\tObject.assign({}, this.form, {\r\n\t\t\t\torderId: this.detail.id\r\n\t\t\t})\r\n\t\t)\r\n\t\t\t.then(() => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '评价成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/subcontract/pages/order/order?type=4'\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 1500)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tsubmitted: false\r\n\t\t\t\t})\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: err || '详情获取失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t}\r\n}\r\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderEvaluation.vue?vue&type=style&index=0&id=3aac34df&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderEvaluation.vue?vue&type=style&index=0&id=3aac34df&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1630304939941\n      var cssReload = require(\"E:/代码/group-shop-uniapp-wx-Source/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}