(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subcontract/pages/footer/footer"],{"04a2":function(t,e,n){"use strict";n.r(e);var r=n("c4e3d"),i=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},4292:function(t,e,n){},"5f1a":function(t,e,n){"use strict";(function(t){n("6cdc");var e=r(n("fea0"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"79e0":function(t,e,n){"use strict";var r=n("4292"),i=n.n(r);i.a},c4e3d:function(t,e,n){"use strict";(function(t){function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("9ab4"),o=n("60a3"),a=n("771b"),c=s(n("7297"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return p(t)||h(t)||f(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function p(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function m(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},b(t,e)}function k(t){var e=L();return function(){var n,r=E(t);if(e){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}function D(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?C(t):e}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var O=function(e){m(r,e);var n=k(r);function r(){var t;return y(this,r),t=n.apply(this,arguments),t.list=[],t.isDeal=!1,t.isAllCheck=!1,t.query={current:1,size:10},t.hasMore=!1,t.height=0,t}return g(r,[{key:"onShow",value:function(){var e=this;this.getFooterList(),t.getSystemInfo({success:function(t){e.setData({height:t.windowHeight})}})}},{key:"getFooterList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:1,size:10},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.hasMore||(0,a.userFooterList)(Object.assign({},this.query,e)).then((function(e){var r=t.list,i=[],o=[];e.length>0&&e.forEach((function(t){var e=JSON.parse(t);e.forEach((function(t){t.originalPrice=Number(t.originalPrice).toFixed(2),t.productPrice=Number(t.productPrice).toFixed(2),t.intPrice="0.00"!==t.productPrice?t.productPrice.split(".")[0]:t.originalPrice.split(".")[0],t.smaPrice="0.00"!==t.productPrice?t.productPrice.split(".")[1]:t.originalPrice.split(".")[1]})),i=i.concat(e)})),t.hasMore=e.length!==t.query.size,o=u(new Set(i.map((function(t){return t.time})))),r.length>0&&r[r.length-1].date===o[0]&&(r[r.length-1].shopList=r[r.length-1].shopList.concat(i.filter((function(t){return t.time===o[0]}))),o.shift()),o.forEach((function(t){r.push({date:t,isDataCheck:!1,shopList:i.filter((function(e){return e.time===t}))})})),n&&t.isAllCheck&&t.isDeal&&r.forEach((function(t){t.isDataCheck=!0,t.shopList.forEach((function(t){t.isCheck=!0}))})),t.setData({list:r,hasMore:t.hasMore})}))}},{key:"onReachBottom",value:function(){this.setData({"query.current":++this.query.current}),this.getFooterList({current:1,size:10},!0)}},{key:"dataOnChange",value:function(t){var e=t.currentTarget.dataset.index,n=this.list;n.forEach((function(n,r){r===e&&(n.isDataCheck=!n.isDataCheck,n.shopList.map((function(e){return e.isCheck=t.detail})))})),this.checkout(),this.list=u(n)}},{key:"onChange",value:function(t){var e=t.currentTarget.dataset.index,n=t.currentTarget.dataset.shopindex,r=this.list;r[e].shopList[n].isCheck=!r[e].shopList[n].isCheck,r.forEach((function(t){t.isDataCheck=t.shopList.every((function(t){return!0===t.isCheck}))})),this.checkout(),this.list=u(r)}},{key:"checkout",value:function(){var t=this.list,e=t.every((function(t){return!0===t.isDataCheck}));this.setData({isAllCheck:e})}},{key:"deleteFootprint",value:function(t){var e=t.currentTarget.dataset.index,n=t.currentTarget.dataset.shopindex,r=this.list;r.forEach((function(t){t.shopList.forEach((function(t){t.isDelete=!1}))})),this.setData({list:r}),this.isDeal||(r[e].shopList[n].isDelete=!0,this.setData({list:r}))}},{key:"toProductDetail",value:function(e){var n=e.currentTarget.dataset.index,r=e.currentTarget.dataset.shopindex,i=this.list;i.forEach((function(t){t.shopList.map((function(t){return t.isDelete=!1}))})),this.setData({list:i});var o=i[n].shopList[r].productId;this.isDeal||t.navigateTo({url:"/subcontract/pages/detail/detail?id="+o})}},{key:"deleteSure",value:function(e){var n=this,r=e.currentTarget.dataset.index,i=e.currentTarget.dataset.shopindex,o=this.list,s=[];s.push(o[r].shopList[i].footmarkId),c.default.confirm({title:"提示",message:"确认删除此商品记录吗"}).then((function(){(0,a.userFooterDel)(0,s).then((function(){var e={current:1,size:n.query.size*n.query.current};n.setData({list:[],hasMore:!1}),n.getFooterList(e),t.showToast({title:"删除成功",icon:"none"})}))})).catch((function(){o[r].shopList[i].isDelete=!1,n.setData({list:o})}))}},{key:"cleanAll",value:function(){var t=this;c.default.confirm({title:"提示",message:"确认清空商品浏览记录吗"}).then((function(){(0,a.userFooterDel)(1,[-1]).then((function(){t.getFooterList(),t.setData({list:[]})}))}))}},{key:"editAll",value:function(){var t=this.list;t.forEach((function(t){t.shopList.map((function(t){return t.isDelete=!1}))})),this.setData({list:t,isDeal:!0})}},{key:"checkAllDeal",value:function(){this.list.forEach((function(t){t.isDataCheck=!t.isDataCheck,t.shopList.forEach((function(t){t.isCheck=!t.isCheck}))})),this.checkout(),this.setData({list:this.list})}},{key:"cancelDeal",value:function(){this.list.forEach((function(t){t.isDataCheck=!1,t.shopList.forEach((function(t){t.isCheck=!1}))})),this.setData({list:this.list,isDeal:!1,isAllCheck:!1})}},{key:"checkAllDel",value:function(){var e=this,n=this.list,r=[];n.forEach((function(t){t.shopList.forEach((function(t){t.isCheck&&r.push(t.footmarkId)}))})),r.length?c.default.confirm({title:"提示",message:"确认删除选中商品吗"}).then((function(){(0,a.userFooterDel)(0,r).then((function(){var t={current:1,size:e.query.size*e.query.current};e.setData({list:[],isDeal:!1,hasMore:!1}),e.getFooterList(t)}))})):t.showToast({icon:"none",title:"请先选择删除商品"})}},{key:"gotoIndex",value:function(){this.$STORE.setStore.backHome()}}]),r}(o.Vue);O=(0,i.__decorate)([(0,o.Component)({})],O);var P=O;e.default=P}).call(this,n("543d")["default"])},e255:function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},fea0:function(t,e,n){"use strict";n.r(e);var r=n("e255"),i=n("04a2");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("79e0");var a,c=n("f0c5"),s=Object(c["a"])(i["default"],r["b"],r["c"],!1,null,"3eb87e04",null,!1,r["a"],a);e["default"]=s.exports}},[["5f1a","common/runtime","common/vendor"]]]);