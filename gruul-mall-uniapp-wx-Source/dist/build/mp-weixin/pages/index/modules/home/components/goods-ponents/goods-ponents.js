(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/modules/home/components/goods-ponents/goods-ponents"],{"06cd":function(t,e,o){"use strict";(function(t){function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=d(o("a34a")),a=o("9ab4"),s=o("60a3"),i=o("771b"),u=d(o("b7c7")),c=d(o("63ea")),l=d(o("6821"));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e,o,n,r,a,s){try{var i=t[a](s),u=i.value}catch(c){return void o(c)}i.done?e(u):Promise.resolve(u).then(n,r)}function p(t){return function(){var e=this,o=arguments;return new Promise((function(n,r){var a=t.apply(e,o);function s(t){f(a,n,r,s,i,"next",t)}function i(t){f(a,n,r,s,i,"throw",t)}s(void 0)}))}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,o){return e&&h(t.prototype,e),o&&h(t,o),t}function m(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},v(t,e)}function b(t){var e=G();return function(){var o,n=k(t);if(e){var r=k(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return x(this,o)}}function x(t,e){return!e||"object"!==n(e)&&"function"!==typeof e?C(t):e}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var w=function(e){m(n,e);var o=b(n);function n(){var t;return g(this,n),t=o.apply(this,arguments),t.formData={},t.currentCategoryId="-1",t.GoodsCornerMark={url:"",class:""},t.goodsList=[],t.name="",t.GoodsNameClass="",t.GoodsBoxClass="",t.ClassBugCard3="",t.GoodsItemStyle="",t.GoodsLastStyle="",t.saleMode="",t}return y(n,[{key:"mounted",value:function(){var t=this.decoretionProperties,e=(0,l.default)(JSON.stringify(t)),o=u.default.get("discountList-".concat(e));1===t.ponentType?this.filterCategory(t):2===t.ponentType&&this.discountList(e,o,t),this.getGoodsCornerMark(t),this.getGoodsNameClass(t),this.getGoodsBoxClass(t),this.getClassBugCard3(t),this.getGoodsItemStyle(t),this.getGoodsLastStyle(t),this.formData=t}},{key:"getGoodsNameClass",value:function(t){var e=t.textStyle;this.GoodsNameClass=e}},{key:"getGoodsBoxClass",value:function(t){var e=t.goodsStyle,o=t.angle;this.GoodsBoxClass="".concat(e," ").concat(o)}},{key:"getClassBugCard3",value:function(t){var e=t.listStyle,o=t.showContent.buttonStyle,n="";1===o&&"goods-style--four"===e&&(n="goods-buy__cart3"),2===o&&"goods-style--four"===e&&(n="goods-buy__cart3 buy-icon2"),this.ClassBugCard3=n}},{key:"getGoodsItemStyle",value:function(t){var e=t.listStyle,o=t.goodPadding,n="",r="";n="goods-style--four"===e?"margin: 0px ".concat(o,"px 0px 0px;"):"margin: 0px 0px ".concat(o,"px 0px;"),r="goods-style--two"===e?"width: calc(50% - ".concat(o/2,"px);"):"",this.GoodsItemStyle="".concat(n).concat(r)}},{key:"getGoodsLastStyle",value:function(t){var e=t.listStyle,o=t.goodPadding,n=void 0===o?0:o,r="";r="goods-style--two"===e?"margin: 0px 0px ".concat(n,"px 0px;"):"",this.GoodsLastStyle=r}},{key:"goodsIds",value:function(t){var e=Array.isArray(t.goods)?t.goods:[];return e.map((function(t){return t.id})).join(",")}},{key:"saleModeIds",value:function(t){var e=Array.isArray(t.goods)?t.goods:[];return Array.from(new Set(e.map((function(t){return t.saleMode}))))}},{key:"filterCategory",value:function(){var t=p(r.default.mark((function t(e){var o,n,a,s,u;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.getAllCategory)({});case 3:o=t.sent,n=o||[],a=e.firstCatList,s=void 0===a?[]:a,u=[],n.forEach((function(t){t.productNumber=t.showCategoryVos.reduce((function(t,e){return t+=Number(e.productNumber),t}),0),t.productNumber>50&&(t.productNumber=50)})),s.forEach((function(t){var e=n.find((function(e){return e.id===t.id}));e&&(e.saleMode=t.saleMode,u.push(e))})),e.firstCatList=u,this.currentCategoryId=u[0].id,this.saleMode=u[0].saleMode,this.formData=e,this.getAllList(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log("goods-ponents.vue--lin337",t.t0);case 19:case"end":return t.stop()}}),t,this,[[0,16]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"activeClass",value:function(t){var e=t.currentTarget.dataset.id,o=t.currentTarget.dataset.mode;this.currentCategoryId=e,this.saleMode=o,this.getAllList()}},{key:"discountList",value:function(){var t=p(r.default.mark((function t(e,o,n){var a,s,l,d,f=this;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.goodsIds(n),s=this.saleModeIds(n),a){t.next=4;break}return t.abrupt("return");case 4:l=[],d=[],setTimeout(p(r.default.mark((function t(){var n,p;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<s.length)){t.next=10;break}return t.next=4,(0,i.discountList)(a,{saleMode:s[n],launchArea:""});case 4:p=t.sent,l=l.concat(p),n===s.length-1&&(l.forEach((function(t){d.push({id:t.id,img:f.returnGoodsImg(t),name:t.name,price:t.minPrice,maxPrice:t.maxPrice,inventory:t.inventory});var e={goodsList:d};f.dealGoodsSort(e,a.split(",")),f.goodsList=e.goodsList})),l&&!(0,c.default)(l,o)&&u.default.set("discountList-".concat(e),l,2592e5));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t)}))),100);case 7:case"end":return t.stop()}}),t,this)})));function e(e,o,n){return t.apply(this,arguments)}return e}()},{key:"dealGoodsSort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=[],n=t.goodsList;e.forEach((function(t){var e=n.find((function(e){return e.id===t}));e&&o.push(e)})),n.forEach((function(t){!e.includes(t.id)&&o.push(t)})),t.goodsList=o}},{key:"returnGoodsImg",value:function(t){var e=t.widePic,o=t.pic,n=o||"";return"goods-style--one"===this.formData.listStyle&&(n=e?e.split(",")[0]:o||""),n}},{key:"getGoodsCornerMark",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.formData,e=t.showContent.tagStyle,o=["https://medusa-small-file-1253272780.cos.ap-shanghai.myqcloud.com/gruul/20201026/37a28e49acb448fc8618d5e72851b027.png","https://medusa-small-file-1253272780.cos.ap-shanghai.myqcloud.com/gruul/20201026/1622a28ef72040f9a2f367a2efa7c32d.png","https://medusa-small-file-1253272780.cos.ap-shanghai.myqcloud.com/gruul/20201026/0f33444422b14a8e980cc50d0011e2d0.png"],n=["goods-item__coner1","goods-item__coner2","goods-item__coner3"];this.GoodsCornerMark={url:o[+e-1],class:n[+e-1]}}},{key:"getAllList",value:function(){var t=p(r.default.mark((function t(){var e,o,n,a,s,u,c=this;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],"-1"===this.currentCategoryId?this.formData.firstCatList.map((function(t){"-1"!==t.id&&e.push(t.id)})):e.push(this.currentCategoryId),o={saleMode:this.saleMode},t.next=5,(0,i.getEffectCategoryGoods)(e.join(","),o);case 5:n=t.sent,a=[],n.forEach((function(t){t.apiAliveProductVos.forEach((function(t){a.find((function(e){return e.id===t.id}))||a.push(t)}))})),s=[],this.goodsList=s,a.forEach((function(t){s.push({id:Number(t.id),name:t.name,img:c.returnGoodsImg(t),actPrice:Number(t.maxPrice),price:c.dealGoogsPrice(t.minPrice),maxPrice:c.dealGoogsPrice(Number(t.maxPrice)),soldCount:t.sale,inventory:t.inventory})})),this.goodsList=s.sort((function(t,e){return t.name>e.name?-1:1})),u=this.formData,this.getGoodsCornerMark(u),this.getGoodsNameClass(u),this.getGoodsBoxClass(u),this.getClassBugCard3(u),this.getGoodsItemStyle(u),this.getGoodsLastStyle(u);case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"dealGoogsPrice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=String(t);return isNaN(t)?e="0":t>=1e4&&t<1e8?e="".concat(parseFloat((t/1e4).toFixed(2)),"万"):t>1e8&&(e="".concat(parseFloat((t/1e8).toFixed(2)),"亿")),e}},{key:"gotoDetail",value:function(e){var o=e.currentTarget.dataset,n=o.id,r=o.img;t.navigateTo({url:"/subcontract/pages/detail/detail?id=".concat(n,"&img=").concat(r)})}}]),n}(s.Vue);(0,a.__decorate)([(0,s.Prop)({type:Object})],w.prototype,"decoretionProperties",void 0),w=(0,a.__decorate)([(0,s.Component)({})],w);var S=w;e.default=S}).call(this,o("543d")["default"])},"0d73":function(t,e,o){"use strict";var n=o("38ba"),r=o.n(n);r.a},"38ba":function(t,e,o){},"65d4":function(t,e,o){"use strict";o.r(e);var n=o("e293"),r=o("c360");for(var a in r)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return r[t]}))}(a);o("0d73");var s,i=o("f0c5"),u=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,"c925f69e",null,!1,n["a"],s);e["default"]=u.exports},c360:function(t,e,o){"use strict";o.r(e);var n=o("06cd"),r=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=r.a},e293:function(t,e,o){"use strict";var n;o.d(e,"b",(function(){return r})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var r=function(){var t=this,e=t.$createElement;t._self._c},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/modules/home/components/goods-ponents/goods-ponents-create-component',
    {
        'pages/index/modules/home/components/goods-ponents/goods-ponents-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("65d4"))
        })
    },
    [['pages/index/modules/home/components/goods-ponents/goods-ponents-create-component']]
]);
